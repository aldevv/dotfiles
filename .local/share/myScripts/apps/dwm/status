#!/bin/bash
#change to dash
while true; do
    time=$(date +'%H:%M')
    # battery="ğŸ”‹$(upower -i /org/freedesktop/UPower/devices/battery_BAT0 | awk '/percentage/{print $2}' | tr -d "%")"
    battery="$(upower -i /org/freedesktop/UPower/devices/battery_BAT0 | awk '/percentage/{print $2}' | tr -d "%")é›»"
    if [[ $battery =~ ^[0-9]é›» ]]; then
        dunstify "Low Battery"
    fi
    # volume="ğŸ”‰$(amixer sget Master | awk -F"[][]" '/\[[0-9]/{ print $2 }' | sed 1q | tr -d "%")"
    volume="$(amixer sget Master | awk -F"[][]" '/\[[0-9]/{ print $2 }' | sed 1q | tr -d "%")éŸ³"
    if [[ -z "$checked" ]]; then
        checked="true" 
        sudo eopkg ur
        packages="ğŸ“¦$(sudo eopkg lu | wc -l)"
        if [[ $packages == "ğŸ“¦1" ]]; then
            packages=""
        fi

        declare -A days
        days[Mon]="æœˆ"
        days[Tue]="ç«"
        days[Wed]="æ°´"
        days[Thu]="æœ¨"
        days[Fri]="é‡‘"
        days[Sat]="åœŸ"
        days[Sun]="æ—¥"
        day=$(date +'%a')
        date=$(date +"%dæ—¥%mæœˆ%yå¹´ (${days[${day}]})")
    fi
	xsetroot -name " ${packages} | ${volume} | ${battery} | ${time} | ${date}"
	sleep 60
done
